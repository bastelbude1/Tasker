# TEST_METADATA: {"description": "Statistics verification test - parallel task success/failure counting", "test_type": "positive", "expected_exit_code": 0, "expected_success": true, "skip_host_validation": true, "expected_execution_path": [0, 1, 2], "acceptable_warnings": ["Post-sleep timer did not signal within timeout"]}
# STATISTICS VERIFICATION TEST
# Tests the fixed statistics and min_success logic

# Task 0: Introduction
task=0
hostname=localhost
command=echo
arguments=Statistics Verification Test - 1 success, 1 timeout, 1 failure
exec=local

# Task 1: Parallel execution with min_success=1
# Should succeed if at least 1 of the 3 subtasks succeeds
task=1
type=parallel
max_parallel=3
tasks=100,101,102
success=min_success=1
on_success=2
on_failure=50

# Task 2: Success handler
task=2
hostname=localhost
command=echo
arguments=SUCCESS: Statistics test passed - min_success=1 condition met
exec=local
next=never

# Task 50: Error handler
task=50
hostname=localhost
command=echo
arguments=ERROR: Statistics test failed
exec=local
next=never

# ===============================================
# PARALLEL SUBTASKS
# ===============================================

# Task 100: Succeeds after 1s
task=100
hostname=localhost
command=echo
arguments=Task 100 - SUCCESS (1s)
exec=local
timeout=5
sleep=1

# Task 101: Times out (sleeps 5s with timeout=5s)
task=101
hostname=localhost
command=echo
arguments=Task 101 - TIMEOUT (5s sleep, 5s timeout)
exec=local
timeout=5
sleep=5

# Task 102: Fails immediately
task=102
hostname=localhost
command=sh
arguments=-c "echo 'Task 102 - FAILURE'; exit 1"
exec=local
timeout=5
