# TEST_METADATA: {"description": "Parallel hostnames: some fail and min_success=4 not met", "test_type": "negative", "expected_exit_code": 1, "expected_success": false}
# Failure handling test: 5 hosts, 3 succeed, 2 fail; min_success=4 NOT met
# Expected: Tasks 0,1,2 succeed, tasks 3,4 fail; overall failure (only 3 succeed, need 4)

task=0
type=parallel
hostnames=localhost,localhost,localhost,localhost,localhost
command=success_pattern.sh
arguments=@task@ 100000,100001,100002
exec=local
success=min_success=4
on_success=10
on_failure=99

task=10
hostname=localhost
command=echo
arguments=ERROR_should_not_reach
exec=local

task=99
hostname=localhost
command=echo
arguments=min_success_not_met
exec=local
return=1
