# TEST_METADATA: {"description": "Test JSON within 100MB size limit", "test_type": "positive", "expected_exit_code": 0, "expected_success": true, "verify_json_output": true, "expected_json_status": "success"}
# Test that 20 tasks with 2MB output each (truncated to 1MB) = 20MB total (within 100MB limit)
# Expected: Workflow succeeds, JSON output generated successfully
# Note: Actual 100MB limit test would require 100+ tasks which is too slow for CI

--auto-recovery
--skip-host-validation
--skip-security-validation
--output-json

# Parallel execution of 20 tasks
# Each generates ~2MB stdout, truncated to 1MB in JSON
# Total: 20MB in JSON (well within 100MB limit)
task=0
type=parallel
max_parallel=5
tasks=1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20

# Template tasks - each generates ~2MB stdout
task=1
hostname=localhost
command=python3
arguments=-c "data='X'*10000; [print(data) for _ in range(200)]"
exec=local

task=2
hostname=localhost
command=python3
arguments=-c "data='X'*10000; [print(data) for _ in range(200)]"
exec=local

task=3
hostname=localhost
command=python3
arguments=-c "data='X'*10000; [print(data) for _ in range(200)]"
exec=local

task=4
hostname=localhost
command=python3
arguments=-c "data='X'*10000; [print(data) for _ in range(200)]"
exec=local

task=5
hostname=localhost
command=python3
arguments=-c "data='X'*10000; [print(data) for _ in range(200)]"
exec=local

task=6
hostname=localhost
command=python3
arguments=-c "data='X'*10000; [print(data) for _ in range(200)]"
exec=local

task=7
hostname=localhost
command=python3
arguments=-c "data='X'*10000; [print(data) for _ in range(200)]"
exec=local

task=8
hostname=localhost
command=python3
arguments=-c "data='X'*10000; [print(data) for _ in range(200)]"
exec=local

task=9
hostname=localhost
command=python3
arguments=-c "data='X'*10000; [print(data) for _ in range(200)]"
exec=local

task=10
hostname=localhost
command=python3
arguments=-c "data='X'*10000; [print(data) for _ in range(200)]"
exec=local

task=11
hostname=localhost
command=python3
arguments=-c "data='X'*10000; [print(data) for _ in range(200)]"
exec=local

task=12
hostname=localhost
command=python3
arguments=-c "data='X'*10000; [print(data) for _ in range(200)]"
exec=local

task=13
hostname=localhost
command=python3
arguments=-c "data='X'*10000; [print(data) for _ in range(200)]"
exec=local

task=14
hostname=localhost
command=python3
arguments=-c "data='X'*10000; [print(data) for _ in range(200)]"
exec=local

task=15
hostname=localhost
command=python3
arguments=-c "data='X'*10000; [print(data) for _ in range(200)]"
exec=local

task=16
hostname=localhost
command=python3
arguments=-c "data='X'*10000; [print(data) for _ in range(200)]"
exec=local

task=17
hostname=localhost
command=python3
arguments=-c "data='X'*10000; [print(data) for _ in range(200)]"
exec=local

task=18
hostname=localhost
command=python3
arguments=-c "data='X'*10000; [print(data) for _ in range(200)]"
exec=local

task=19
hostname=localhost
command=python3
arguments=-c "data='X'*10000; [print(data) for _ in range(200)]"
exec=local

task=20
hostname=localhost
command=python3
arguments=-c "data='X'*10000; [print(data) for _ in range(200)]"
exec=local
