# THREAD SAFETY STRESS TEST
# Tests parallel execution with high concurrency to detect race conditions
# This test creates 100 parallel tasks to stress test thread safety

# Global variables for testing
TEST_VAR=initial_value
COUNTER=0

# === START TASK ===
task=0
hostname=localhost
command=echo
arguments=Starting thread safety stress test with 100 parallel tasks
success=exit_0
on_success=1
on_failure=999

# === PARALLEL STRESS TEST WITH 100 TASKS ===
# This creates maximum stress on the thread pool and result collection

task=1
type=parallel
max_parallel=50
tasks=101,102,103,104,105,106,107,108,109,110,111,112,113,114,115,116,117,118,119,120,121,122,123,124,125,126,127,128,129,130,131,132,133,134,135,136,137,138,139,140,141,142,143,144,145,146,147,148,149,150,151,152,153,154,155,156,157,158,159,160,161,162,163,164,165,166,167,168,169,170,171,172,173,174,175,176,177,178,179,180,181,182,183,184,185,186,187,188,189,190,191,192,193,194,195,196,197,198,199,200
timeout=30
on_success=2
on_failure=999
condition=all_success

# === 100 WORKER TASKS - Mixed success/failure for stress testing ===

# Tasks 101-120: Quick success tasks
task=101
hostname=localhost
command=echo
arguments=Task 101 SUCCESS
success=exit_0

task=102
hostname=localhost
command=echo
arguments=Task 102 SUCCESS
success=exit_0

task=103
hostname=localhost
command=echo
arguments=Task 103 SUCCESS
success=exit_0

task=104
hostname=localhost
command=echo
arguments=Task 104 SUCCESS
success=exit_0

task=105
hostname=localhost
command=echo
arguments=Task 105 SUCCESS
success=exit_0

task=106
hostname=localhost
command=echo
arguments=Task 106 SUCCESS
success=exit_0

task=107
hostname=localhost
command=echo
arguments=Task 107 SUCCESS
success=exit_0

task=108
hostname=localhost
command=echo
arguments=Task 108 SUCCESS
success=exit_0

task=109
hostname=localhost
command=echo
arguments=Task 109 SUCCESS
success=exit_0

task=110
hostname=localhost
command=echo
arguments=Task 110 SUCCESS
success=exit_0

task=111
hostname=localhost
command=echo
arguments=Task 111 SUCCESS
success=exit_0

task=112
hostname=localhost
command=echo
arguments=Task 112 SUCCESS
success=exit_0

task=113
hostname=localhost
command=echo
arguments=Task 113 SUCCESS
success=exit_0

task=114
hostname=localhost
command=echo
arguments=Task 114 SUCCESS
success=exit_0

task=115
hostname=localhost
command=echo
arguments=Task 115 SUCCESS
success=exit_0

task=116
hostname=localhost
command=echo
arguments=Task 116 SUCCESS
success=exit_0

task=117
hostname=localhost
command=echo
arguments=Task 117 SUCCESS
success=exit_0

task=118
hostname=localhost
command=echo
arguments=Task 118 SUCCESS
success=exit_0

task=119
hostname=localhost
command=echo
arguments=Task 119 SUCCESS
success=exit_0

task=120
hostname=localhost
command=echo
arguments=Task 120 SUCCESS
success=exit_0

# Tasks 121-140: Mixed with some failures
task=121
hostname=localhost
command=echo
arguments=Task 121 SUCCESS
success=exit_0

task=122
hostname=localhost
command=false
arguments=
success=exit_0

task=123
hostname=localhost
command=echo
arguments=Task 123 SUCCESS
success=exit_0

task=124
hostname=localhost
command=false
arguments=
success=exit_0

task=125
hostname=localhost
command=echo
arguments=Task 125 SUCCESS
success=exit_0

task=126
hostname=localhost
command=echo
arguments=Task 126 SUCCESS
success=exit_0

task=127
hostname=localhost
command=false
arguments=
success=exit_0

task=128
hostname=localhost
command=echo
arguments=Task 128 SUCCESS
success=exit_0

task=129
hostname=localhost
command=echo
arguments=Task 129 SUCCESS
success=exit_0

task=130
hostname=localhost
command=echo
arguments=Task 130 SUCCESS
success=exit_0

task=131
hostname=localhost
command=echo
arguments=Task 131 SUCCESS
success=exit_0

task=132
hostname=localhost
command=echo
arguments=Task 132 SUCCESS
success=exit_0

task=133
hostname=localhost
command=false
arguments=
success=exit_0

task=134
hostname=localhost
command=echo
arguments=Task 134 SUCCESS
success=exit_0

task=135
hostname=localhost
command=echo
arguments=Task 135 SUCCESS
success=exit_0

task=136
hostname=localhost
command=echo
arguments=Task 136 SUCCESS
success=exit_0

task=137
hostname=localhost
command=false
arguments=
success=exit_0

task=138
hostname=localhost
command=echo
arguments=Task 138 SUCCESS
success=exit_0

task=139
hostname=localhost
command=echo
arguments=Task 139 SUCCESS
success=exit_0

task=140
hostname=localhost
command=echo
arguments=Task 140 SUCCESS
success=exit_0

# Tasks 141-160: Variable output sizes for memory stress
task=141
hostname=localhost
command=echo
arguments=Task 141 with longer output to test memory handling in parallel execution
success=exit_0

task=142
hostname=localhost
command=echo
arguments=Task 142 with longer output to test memory handling in parallel execution
success=exit_0

task=143
hostname=localhost
command=echo
arguments=Task 143 with longer output to test memory handling in parallel execution
success=exit_0

task=144
hostname=localhost
command=echo
arguments=Task 144 with longer output to test memory handling in parallel execution
success=exit_0

task=145
hostname=localhost
command=echo
arguments=Task 145 with longer output to test memory handling in parallel execution
success=exit_0

task=146
hostname=localhost
command=echo
arguments=Task 146 with longer output to test memory handling in parallel execution
success=exit_0

task=147
hostname=localhost
command=echo
arguments=Task 147 with longer output to test memory handling in parallel execution
success=exit_0

task=148
hostname=localhost
command=echo
arguments=Task 148 with longer output to test memory handling in parallel execution
success=exit_0

task=149
hostname=localhost
command=echo
arguments=Task 149 with longer output to test memory handling in parallel execution
success=exit_0

task=150
hostname=localhost
command=echo
arguments=Task 150 with longer output to test memory handling in parallel execution
success=exit_0

task=151
hostname=localhost
command=echo
arguments=Task 151 SUCCESS
success=exit_0

task=152
hostname=localhost
command=echo
arguments=Task 152 SUCCESS
success=exit_0

task=153
hostname=localhost
command=echo
arguments=Task 153 SUCCESS
success=exit_0

task=154
hostname=localhost
command=echo
arguments=Task 154 SUCCESS
success=exit_0

task=155
hostname=localhost
command=echo
arguments=Task 155 SUCCESS
success=exit_0

task=156
hostname=localhost
command=echo
arguments=Task 156 SUCCESS
success=exit_0

task=157
hostname=localhost
command=echo
arguments=Task 157 SUCCESS
success=exit_0

task=158
hostname=localhost
command=echo
arguments=Task 158 SUCCESS
success=exit_0

task=159
hostname=localhost
command=echo
arguments=Task 159 SUCCESS
success=exit_0

task=160
hostname=localhost
command=echo
arguments=Task 160 SUCCESS
success=exit_0

# Tasks 161-180: Rapid completion tasks
task=161
hostname=localhost
command=true
arguments=
success=exit_0

task=162
hostname=localhost
command=true
arguments=
success=exit_0

task=163
hostname=localhost
command=true
arguments=
success=exit_0

task=164
hostname=localhost
command=true
arguments=
success=exit_0

task=165
hostname=localhost
command=true
arguments=
success=exit_0

task=166
hostname=localhost
command=true
arguments=
success=exit_0

task=167
hostname=localhost
command=true
arguments=
success=exit_0

task=168
hostname=localhost
command=true
arguments=
success=exit_0

task=169
hostname=localhost
command=true
arguments=
success=exit_0

task=170
hostname=localhost
command=true
arguments=
success=exit_0

task=171
hostname=localhost
command=true
arguments=
success=exit_0

task=172
hostname=localhost
command=true
arguments=
success=exit_0

task=173
hostname=localhost
command=true
arguments=
success=exit_0

task=174
hostname=localhost
command=true
arguments=
success=exit_0

task=175
hostname=localhost
command=true
arguments=
success=exit_0

task=176
hostname=localhost
command=true
arguments=
success=exit_0

task=177
hostname=localhost
command=true
arguments=
success=exit_0

task=178
hostname=localhost
command=true
arguments=
success=exit_0

task=179
hostname=localhost
command=true
arguments=
success=exit_0

task=180
hostname=localhost
command=true
arguments=
success=exit_0

# Tasks 181-200: Final batch with mixed results
task=181
hostname=localhost
command=echo
arguments=Task 181 SUCCESS
success=exit_0

task=182
hostname=localhost
command=echo
arguments=Task 182 SUCCESS
success=exit_0

task=183
hostname=localhost
command=echo
arguments=Task 183 SUCCESS
success=exit_0

task=184
hostname=localhost
command=echo
arguments=Task 184 SUCCESS
success=exit_0

task=185
hostname=localhost
command=echo
arguments=Task 185 SUCCESS
success=exit_0

task=186
hostname=localhost
command=echo
arguments=Task 186 SUCCESS
success=exit_0

task=187
hostname=localhost
command=echo
arguments=Task 187 SUCCESS
success=exit_0

task=188
hostname=localhost
command=echo
arguments=Task 188 SUCCESS
success=exit_0

task=189
hostname=localhost
command=echo
arguments=Task 189 SUCCESS
success=exit_0

task=190
hostname=localhost
command=echo
arguments=Task 190 SUCCESS
success=exit_0

task=191
hostname=localhost
command=echo
arguments=Task 191 SUCCESS
success=exit_0

task=192
hostname=localhost
command=echo
arguments=Task 192 SUCCESS
success=exit_0

task=193
hostname=localhost
command=echo
arguments=Task 193 SUCCESS
success=exit_0

task=194
hostname=localhost
command=echo
arguments=Task 194 SUCCESS
success=exit_0

task=195
hostname=localhost
command=echo
arguments=Task 195 SUCCESS
success=exit_0

task=196
hostname=localhost
command=echo
arguments=Task 196 SUCCESS
success=exit_0

task=197
hostname=localhost
command=echo
arguments=Task 197 SUCCESS
success=exit_0

task=198
hostname=localhost
command=echo
arguments=Task 198 SUCCESS
success=exit_0

task=199
hostname=localhost
command=echo
arguments=Task 199 SUCCESS
success=exit_0

task=200
hostname=localhost
command=echo
arguments=Task 200 SUCCESS - FINAL TASK
success=exit_0

# === VERIFICATION TASK ===
# This task runs only if all parallel tasks complete successfully
# If we see this, it means no race conditions corrupted the results

task=2
hostname=localhost
command=echo
arguments=THREAD SAFETY TEST PASSED - All 100 parallel tasks completed without race conditions
success=exit_0
on_success=3

task=3
hostname=localhost
command=echo
arguments=STRESS TEST COMPLETE - No thread safety issues detected
success=exit_0

# === FAILURE HANDLER ===
task=999
hostname=localhost
command=echo
arguments=THREAD SAFETY TEST FAILED - Race condition or corruption detected
success=exit_0